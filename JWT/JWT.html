<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>H·ªçc JWT T∆∞∆°ng T√°c | Mentor-Mentee</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Chosen Palette: Calm Neutrals -->
  <!-- Application Structure Plan: T√¥i ƒë√£ thi·∫øt k·∫ø ·ª©ng d·ª•ng n√†y nh∆∞ m·ªôt m√¥-ƒëun h·ªçc t·∫≠p t∆∞∆°ng t√°c tr√™n m·ªôt trang duy nh·∫•t. Thay v√¨ cu·ªôn d√†i, ng∆∞·ªùi d√πng s·ª≠ d·ª•ng thanh ƒëi·ªÅu h∆∞·ªõng b√™n c·∫°nh ƒë·ªÉ chuy·ªÉn ƒë·ªïi gi·ªØa c√°c ph·∫ßn h·ªçc t·∫≠p ch√≠nh: T·ªïng Quan, Gi·∫£i Ph·∫´u JWT, Lu·ªìng Ho·∫°t ƒê·ªông, Tri·ªÉn Khai Th·ª±c T·∫ø, B·∫£o M·∫≠t, v√† T√¨nh Hu·ªëng Th·ª±c T·∫ø. C·∫•u tr√∫c n√†y cho ph√©p ng∆∞·ªùi d√πng t·ª± do kh√°m ph√° c√°c ch·ªß ƒë·ªÅ theo t·ªëc ƒë·ªô c·ªßa ri√™ng h·ªç, t·∫≠p trung v√†o t·ª´ng kh√°i ni·ªám m·ªôt c√°ch tr·ª±c quan. C√°c t∆∞∆°ng t√°c nh∆∞ click, hover, v√† chuy·ªÉn tab ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ l√†m cho c√°c kh√°i ni·ªám ph·ª©c t·∫°p tr·ªü n√™n d·ªÖ hi·ªÉu v√† h·∫•p d·∫´n h∆°n, thay v√¨ ch·ªâ ƒë·ªçc vƒÉn b·∫£n thu·∫ßn t√∫y. C·∫•u tr√∫c n√†y ƒë∆∞·ª£c ch·ªçn ƒë·ªÉ t·ªëi ∆∞u h√≥a tr·∫£i nghi·ªám h·ªçc t·∫≠p, bi·∫øn m·ªôt t√†i li·ªáu k·ªπ thu·∫≠t th√†nh m·ªôt c√¥ng c·ª• h∆∞·ªõng d·∫´n h·∫•p d·∫´n. -->
  <!-- Visualization & Content Choices:
      - So s√°nh JWT vs Session: D√πng b·∫£ng so s√°nh tr·ª±c quan (HTML/Tailwind) ƒë·ªÉ l√†m n·ªïi b·∫≠t s·ª± kh√°c bi·ªát c·ªët l√µi. M·ª•c ti√™u: So s√°nh. T∆∞∆°ng t√°c: Hover ƒë·ªÉ xem chi ti·∫øt.
      - Gi·∫£i ph·∫´u JWT: M·ªôt "b·ªô gi·∫£i m√£" JWT m√¥ ph·ªèng (HTML/CSS/JS) cho ph√©p ng∆∞·ªùi d√πng nh·∫•p v√†o t·ª´ng ph·∫ßn (Header, Payload, Signature) ƒë·ªÉ xem n·ªôi dung ƒë√£ gi·∫£i m√£ v√† gi·∫£i th√≠ch. M·ª•c ti√™u: T·ªï ch·ª©c, Th√¥ng tin. T∆∞∆°ng t√°c: Click.
      - Lu·ªìng ho·∫°t ƒë·ªông: S∆° ƒë·ªì quy tr√¨nh t·ª´ng b∆∞·ªõc (HTML/CSS) minh h·ªça v√≤ng ƒë·ªùi c·ªßa JWT, ƒë∆∞·ª£c ƒëi·ªÅu khi·ªÉn b·∫±ng c√°c n√∫t b·∫•m. M·ª•c ti√™u: Hi·ªÉn th·ªã s·ª± thay ƒë·ªïi, T·ªï ch·ª©c. T∆∞∆°ng t√°c: Click.
      - Tri·ªÉn khai Spring Boot: S·ª≠ d·ª•ng giao di·ªán tab (HTML/JS) ƒë·ªÉ tr√¨nh b√†y c√°c ƒëo·∫°n m√£ kh√°c nhau (`pom.xml`, `SecurityConfig`, v.v.), gi√∫p ng∆∞·ªùi d√πng kh√¥ng b·ªã cho√°ng ng·ª£p. M·ª•c ti√™u: T·ªï ch·ª©c, Th√¥ng tin. T∆∞∆°ng t√°c: Click tab, copy code.
      - Best Practices: L∆∞·ªõi c√°c th·∫ª (card) c√≥ th·ªÉ l·∫≠t (HTML/CSS/JS), m·ªói th·∫ª ƒë·∫°i di·ªán cho m·ªôt nguy√™n t·∫Øc b·∫£o m·∫≠t. M·ª•c ti√™u: Th√¥ng tin, T·ªï ch·ª©c. T∆∞∆°ng t√°c: Click/hover.
      - Case Study: S∆° ƒë·ªì ki·∫øn tr√∫c microservices ƒë∆°n gi·∫£n (HTML/CSS) minh h·ªça lu·ªìng x√°c th·ª±c trong m·ªôt ·ª©ng d·ª•ng th·ª±c t·∫ø. M·ª•c ti√™u: Hi·ªÉn th·ªã m·ªëi quan h·ªá. T∆∞∆°ng t√°c: Click v√†o c√°c m≈©i t√™n ƒë·ªÉ xem m√¥ t·∫£ lu·ªìng.
      T·∫•t c·∫£ c√°c l·ª±a ch·ªçn n√†y ƒë·ªÅu nh·∫±m m·ª•c ƒë√≠ch bi·∫øn n·ªôi dung tƒ©nh th√†nh tr·∫£i nghi·ªám h·ªçc t·∫≠p ch·ªß ƒë·ªông v√† tr·ª±c quan, tu√¢n th·ªß c√°c y√™u c·∫ßu k·ªπ thu·∫≠t.
  -->
  <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

  <style>
    body {
      font-family: 'Be Vietnam Pro', sans-serif;
      background-color: #F8F9FA;
      color: #343A40;
    }
    .nav-link {
      transition: all 0.3s ease;
      border-left: 3px solid transparent;
    }
    .nav-link.active {
      background-color: #E9ECEF;
      color: #007BFF;
      border-left-color: #007BFF;
    }
    .nav-link:hover {
      background-color: #F1F3F5;
      border-left-color: #007BFF;
    }
    .content-section {
      display: none;
    }
    .content-section.active {
      display: block;
      animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .jwt-part {
      cursor: pointer;
      transition: all 0.2s ease-in-out;
    }
    .jwt-part:hover {
      transform: scale(1.05);
    }
    .tab-button.active {
      border-bottom-color: #007BFF;
      color: #007BFF;
      font-weight: 600;
    }
    .flow-step {
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    .flow-step.active {
      border-color: #007BFF;
      box-shadow: 0 4px 14px rgba(0, 123, 255, 0.2);
      transform: scale(1.02);
    }
    .practice-card {
      transition: transform 0.3s;
    }
    .practice-card:hover {
      transform: translateY(-5px);
    }
    .code-block {
      position: relative;
      background-color: #282c34;
      color: #abb2bf;
      padding: 1.5rem;
      border-radius: 0.5rem;
      font-family: 'Courier New', Courier, monospace;
      font-size: 0.9em;
      overflow-x: auto;
    }
    .copy-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: #4B5563;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.8em;
      transition: background-color 0.2s;
    }
    .copy-btn:hover {
      background-color: #6B7280;
    }
  </style>
</head>
<body class="antialiased">

<div class="flex flex-col md:flex-row min-h-screen">
  <aside class="w-full md:w-64 bg-white shadow-md md:min-h-screen">
    <div class="p-6">
      <h1 class="text-2xl font-bold text-gray-800">H·ªçc JWT</h1>
      <p class="text-sm text-gray-500">Mentor-Mentee</p>
    </div>
    <nav id="main-nav" class="mt-4">
      <a href="#overview" class="nav-link block p-4 text-gray-600 font-semibold active">
        <span class="mr-2">üöÄ</span> T·ªïng Quan
      </a>
      <a href="#anatomy" class="nav-link block p-4 text-gray-600 font-semibold">
        <span class="mr-2">üî¨</span> Gi·∫£i Ph·∫´u JWT
      </a>
      <a href="#flow" class="nav-link block p-4 text-gray-600 font-semibold">
        <span class="mr-2">üåä</span> Lu·ªìng Ho·∫°t ƒê·ªông
      </a>
      <a href="#implementation" class="nav-link block p-4 text-gray-600 font-semibold">
        <span class="mr-2">üíª</span> Tri·ªÉn Khai Th·ª±c T·∫ø
      </a>
      <a href="#best-practices" class="nav-link block p-4 text-gray-600 font-semibold">
        <span class="mr-2">üõ°Ô∏è</span> B·∫£o M·∫≠t T·ªëi ∆Øu
      </a>
      <a href="#case-study" class="nav-link block p-4 text-gray-600 font-semibold">
        <span class="mr-2">üçî</span> T√¨nh Hu·ªëng Th·ª±c T·∫ø
      </a>
    </nav>
  </aside>

  <main class="flex-1 p-6 md:p-10 overflow-auto">
    <div id="overview" class="content-section active">
      <h2 class="text-3xl font-bold mb-4 text-gray-800">JWT l√† g√¨ v√† t·∫°i sao n√≥ l·∫°i quan tr·ªçng?</h2>
      <p class="mb-6 text-lg text-gray-600">Ch√†o b·∫°n, ch√∫ng ta h√£y b·∫Øt ƒë·∫ßu h√†nh tr√¨nh t√¨m hi·ªÉu v·ªÅ JSON Web Token (JWT). H√£y coi n√≥ nh∆∞ m·ªôt chi·∫øc "th·∫ª cƒÉn c∆∞·ªõc k·ªπ thu·∫≠t s·ªë" nh·ªè g·ªçn v√† an to√†n. N√≥ cho ph√©p c√°c d·ªãch v·ª• trong h·ªá th·ªëng c·ªßa b·∫°n tin t∆∞·ªüng l·∫´n nhau m√† kh√¥ng c·∫ßn ph·∫£i h·ªèi ƒëi h·ªèi l·∫°i "b·∫°n l√† ai?". ƒêi·ªÅu n√†y ƒë·∫∑c bi·ªát quan tr·ªçng trong ki·∫øn tr√∫c microservices, n∆°i c√°c d·ªãch v·ª• c·∫ßn giao ti·∫øp li√™n t·ª•c v·ªõi nhau.</p>

      <div class="bg-white p-6 rounded-lg shadow-sm">
        <h3 class="text-2xl font-semibold mb-4 text-center">JWT vs. Session-based Authentication</h3>
        <p class="text-center text-gray-500 mb-6">ƒê√¢y l√† c√¢u h·ªèi g·ª£i m·ªü quan tr·ªçng: ‚ÄúB·∫°n nghƒ© t·∫°i sao JWT l·∫°i ƒë∆∞·ª£c ∆∞a chu·ªông h∆°n session-based authentication trong microservices?‚Äù. B·∫£ng so s√°nh d∆∞·ªõi ƒë√¢y s·∫Ω cho b·∫°n c√¢u tr·∫£ l·ªùi r√µ r√†ng nh·∫•t.</p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div class="border border-red-200 bg-red-50 p-6 rounded-lg">
            <h4 class="text-xl font-bold text-red-700 mb-3 text-center">X√°c th·ª±c d·ª±a tr√™n Session</h4>
            <p class="text-center mb-4">C√°ch ti·∫øp c·∫≠n "stateful" (c√≥ tr·∫°ng th√°i).</p>
            <ul class="space-y-3 text-gray-700">
              <li><span class="font-semibold text-red-600">L∆∞u tr·ªØ:</span> Server ph·∫£i l∆∞u tr·ªØ th√¥ng tin phi√™n (session) c·ªßa ng∆∞·ªùi d√πng.</li>
              <li><span class="font-semibold text-red-600">Ph·ª• thu·ªôc:</span> C√°c y√™u c·∫ßu ph·∫£i ƒë∆∞·ª£c ki·ªÉm tra v·ªõi kho l∆∞u tr·ªØ session.</li>
              <li><span class="font-semibold text-red-600">Kh·∫£ nƒÉng m·ªü r·ªông:</span> Kh√≥ m·ªü r·ªông theo chi·ªÅu ngang v√¨ c·∫ßn ƒë·ªìng b·ªô session gi·ªØa c√°c server.</li>
              <li><span class="font-semibold text-red-600">V√≠ d·ª•:</span> Gi·ªëng nh∆∞ vi·ªác b·∫°n g·ª≠i xe v√† nh·∫≠n m·ªôt v√© xe. B·∫£o v·ªá ph·∫£i gi·ªØ l·∫°i cu·ªëng v√© ƒë·ªÉ ƒë·ªëi chi·∫øu.</li>
            </ul>
          </div>
          <div class="border border-blue-200 bg-blue-50 p-6 rounded-lg">
            <h4 class="text-xl font-bold text-blue-700 mb-3 text-center">X√°c th·ª±c d·ª±a tr√™n JWT</h4>
            <p class="text-center mb-4">C√°ch ti·∫øp c·∫≠n "stateless" (phi tr·∫°ng th√°i).</p>
            <ul class="space-y-3 text-gray-700">
              <li><span class="font-semibold text-blue-600">L∆∞u tr·ªØ:</span> Server kh√¥ng c·∫ßn l∆∞u g√¨ c·∫£. M·ªçi th√¥ng tin n·∫±m trong token.</li>
              <li><span class="font-semibold text-blue-600">T·ª± ch·ª©a:</span> Token mang theo th√¥ng tin ng∆∞·ªùi d√πng v√† quy·ªÅn h·∫°n.</li>
              <li><span class="font-semibold text-blue-600">Kh·∫£ nƒÉng m·ªü r·ªông:</span> R·∫•t d·ªÖ m·ªü r·ªông. B·∫•t k·ª≥ server n√†o c≈©ng c√≥ th·ªÉ x√°c th·ª±c token.</li>
              <li><span class="font-semibold text-blue-600">V√≠ d·ª•:</span> Gi·ªëng nh∆∞ b·∫°n c√≥ m·ªôt t·∫•m th·∫ª VIP. B·∫•t k·ª≥ c·ª≠a h√†ng n√†o trong chu·ªói c≈©ng c√≥ th·ªÉ nh·∫≠n ra b·∫°n m√† kh√¥ng c·∫ßn g·ªçi v·ªÅ t·ªïng ƒë√†i.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="anatomy" class="content-section">
      <h2 class="text-3xl font-bold mb-4 text-gray-800">Gi·∫£i Ph·∫´u m·ªôt JWT</h2>
      <p class="mb-6 text-lg text-gray-600">M·ªôt JWT bao g·ªìm 3 ph·∫ßn, ƒë∆∞·ª£c ph√¢n t√°ch b·ªüi d·∫•u ch·∫•m: <span class="font-mono text-red-500">Header</span>.<span class="font-mono text-purple-500">Payload</span>.<span class="font-mono text-blue-500">Signature</span>. H√£y nh·∫•p v√†o t·ª´ng ph·∫ßn ƒë·ªÉ xem b√™n trong c√≥ g√¨ nh√©!</p>

      <div class="bg-white p-6 rounded-lg shadow-sm">
        <div id="jwt-visualizer" class="mb-4 p-4 font-mono text-sm break-all bg-gray-100 rounded">
          <span class="jwt-part text-red-500" data-part="header">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</span>.<span class="jwt-part text-purple-500" data-part="payload">eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyLCJyb2xlcyI6WyJBRE1JTiIsIlVTRVIiXX0</span>.<span class="jwt-part text-blue-500" data-part="signature">w3x_v0i-ax32iN2j3iE-E3a3b_x-C3b3a2a8c9d0e1f</span>
        </div>
        <div id="jwt-explanation" class="p-6 border border-gray-200 rounded-lg bg-gray-50 min-h-[200px]">
          <h3 id="explanation-title" class="text-xl font-semibold mb-2">Ch·ªçn m·ªôt ph·∫ßn ƒë·ªÉ kh√°m ph√°</h3>
          <div id="explanation-content" class="text-gray-700"></div>
        </div>
      </div>
    </div>

    <div id="flow" class="content-section">
      <h2 class="text-3xl font-bold mb-4 text-gray-800">Lu·ªìng Ho·∫°t ƒê·ªông c·ªßa JWT</h2>
      <p class="mb-6 text-lg text-gray-600">JWT ho·∫°t ƒë·ªông theo m·ªôt quy tr√¨nh r·∫•t logic. H√£y c√πng theo d√µi t·ª´ng b∆∞·ªõc, t·ª´ l√∫c ng∆∞·ªùi d√πng ƒëƒÉng nh·∫≠p cho ƒë·∫øn khi h·ªç nh·∫≠n ƒë∆∞·ª£c d·ªØ li·ªáu t·ª´ m·ªôt API ƒë∆∞·ª£c b·∫£o v·ªá. Nh·∫•n "B∆∞·ªõc Ti·∫øp Theo" ƒë·ªÉ xem lu·ªìng di chuy·ªÉn.</p>
      <div class="bg-white p-6 rounded-lg shadow-sm">
        <div class="flex flex-col md:flex-row justify-around items-center space-y-4 md:space-y-0 md:space-x-4 mb-8">
          <div id="flow-step-1" class="flow-step text-center p-4 rounded-lg bg-gray-50 w-full md:w-1/4">
            <div class="text-4xl mb-2">üë§</div>
            <h4 class="font-bold">1. Client</h4>
            <p class="text-sm">Ng∆∞·ªùi d√πng ƒëƒÉng nh·∫≠p</p>
          </div>
          <div class="text-2xl font-bold text-gray-400">‚Üí</div>
          <div id="flow-step-2" class="flow-step text-center p-4 rounded-lg bg-gray-50 w-full md:w-1/4">
            <div class="text-4xl mb-2">üè¢</div>
            <h4 class="font-bold">2. Server</h4>
            <p class="text-sm">X√°c th·ª±c & C·∫•p Token</p>
          </div>
          <div class="text-2xl font-bold text-gray-400">‚Üê</div>
          <div id="flow-step-3" class="flow-step text-center p-4 rounded-lg bg-gray-50 w-full md:w-1/4">
            <div class="text-4xl mb-2">üíæ</div>
            <h4 class="font-bold">3. Client</h4>
            <p class="text-sm">L∆∞u tr·ªØ Token</p>
          </div>
        </div>
        <div class="flex flex-col md:flex-row justify-around items-center space-y-4 md:space-y-0 md:space-x-4">
          <div id="flow-step-4" class="flow-step text-center p-4 rounded-lg bg-gray-50 w-full md:w-1/4">
            <div class="text-4xl mb-2">üì§</div>
            <h4 class="font-bold">4. Client</h4>
            <p class="text-sm">G·ª≠i y√™u c·∫ßu v·ªõi Token</p>
          </div>
          <div class="text-2xl font-bold text-gray-400">‚Üí</div>
          <div id="flow-step-5" class="flow-step text-center p-4 rounded-lg bg-gray-50 w-full md:w-1/4">
            <div class="text-4xl mb-2">üõ°Ô∏è</div>
            <h4 class="font-bold">5. Server</h4>
            <p class="text-sm">X√°c minh Token</p>
          </div>
          <div class="text-2xl font-bold text-gray-400">‚Üí</div>
          <div id="flow-step-6" class="flow-step text-center p-4 rounded-lg bg-gray-50 w-full md:w-1/4">
            <div class="text-4xl mb-2">üì¶</div>
            <h4 class="font-bold">6. Server</h4>
            <p class="text-sm">Tr·∫£ v·ªÅ d·ªØ li·ªáu</p>
          </div>
        </div>
        <div id="flow-explanation" class="mt-8 p-6 border rounded-lg bg-gray-50 min-h-[100px]">
          <p id="flow-explanation-text" class="text-lg text-gray-700"></p>
        </div>
        <div class="text-center mt-6">
          <button id="flow-next-btn" class="bg-blue-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-600 transition-colors">B∆∞·ªõc Ti·∫øp Theo</button>
        </div>
      </div>
    </div>

    <div id="implementation" class="content-section">
      <h2 class="text-3xl font-bold mb-4 text-gray-800">Tri·ªÉn Khai v·ªõi Spring Boot</h2>
      <p class="mb-6 text-lg text-gray-600">B√¢y gi·ªù l√† ph·∫ßn th√∫ v·ªã nh·∫•t: √°p d·ª•ng l√Ω thuy·∫øt v√†o th·ª±c t·∫ø! ƒê√¢y l√† c√°ch b·∫°n t√≠ch h·ª£p JWT v√†o m·ªôt ·ª©ng d·ª•ng Spring Boot. T√¥i s·∫Ω ch·ªâ cung c·∫•p c√°c ƒëo·∫°n m√£ c·ªët l√µi ƒë·ªÉ b·∫°n t·∫≠p trung v√†o t∆∞ duy. H√£y chuy·ªÉn qua l·∫°i gi·ªØa c√°c tab ƒë·ªÉ xem t·ª´ng ph·∫ßn nh√©.</p>
      <div class="bg-white p-6 rounded-lg shadow-sm">
        <div class="border-b border-gray-200 mb-4">
          <nav id="code-tabs" class="flex space-x-8 -mb-px">
            <button data-tab="pom" class="tab-button py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 active">pom.xml</button>
            <button data-tab="config" class="tab-button py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">SecurityConfig</button>
            <button data-tab="service" class="tab-button py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">JwtService</button>
            <button data-tab="filter" class="tab-button py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">JwtAuthFilter</button>
          </nav>
        </div>
        <div id="code-content">
          <!-- Code content will be injected here by JS -->
        </div>
      </div>
    </div>

    <div id="best-practices" class="content-section">
      <h2 class="text-3xl font-bold mb-4 text-gray-800">B·∫£o M·∫≠t T·ªëi ∆Øu (Best Practices)</h2>
      <p class="mb-6 text-lg text-gray-600">S·ª≠ d·ª•ng JWT r·∫•t m·∫°nh m·∫Ω, nh∆∞ng "quy·ªÅn l·ª±c l·ªõn ƒëi k√®m v·ªõi tr√°ch nhi·ªám l·ªõn". ƒê·ªÉ ƒë·∫£m b·∫£o h·ªá th·ªëng c·ªßa b·∫°n an to√†n, h√£y lu√¥n ghi nh·ªõ nh·ªØng nguy√™n t·∫Øc v√†ng sau. H√£y di chu·ªôt qua c√°c th·∫ª ƒë·ªÉ xem chi ti·∫øt.</p>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="practice-card bg-white p-6 rounded-lg shadow-sm border-l-4 border-green-500">
          <h4 class="font-bold text-lg mb-2">Th·ªùi gian s·ªëng ng·∫Øn</h4>
          <p class="text-gray-600">Lu√¥n ƒë·∫∑t th·ªùi gian h·∫øt h·∫°n (expiration time - `exp`) cho Access Token ng·∫Øn (v√≠ d·ª•: 15-60 ph√∫t) ƒë·ªÉ gi·∫£m thi·ªÉu r·ªßi ro n·∫øu token b·ªã l·ªô.</p>
        </div>
        <div class="practice-card bg-white p-6 rounded-lg shadow-sm border-l-4 border-green-500">
          <h4 class="font-bold text-lg mb-2">S·ª≠ d·ª•ng Refresh Token</h4>
          <p class="text-gray-600">D√πng Refresh Token c√≥ th·ªùi gian s·ªëng d√†i h∆°n ƒë·ªÉ l·∫•y Access Token m·ªõi, gi√∫p ng∆∞·ªùi d√πng kh√¥ng ph·∫£i ƒëƒÉng nh·∫≠p l·∫°i li√™n t·ª•c.</p>
        </div>
        <div class="practice-card bg-white p-6 rounded-lg shadow-sm border-l-4 border-red-500">
          <h4 class="font-bold text-lg mb-2">Kh√¥ng l∆∞u th√¥ng tin nh·∫°y c·∫£m</h4>
          <p class="text-gray-600">Payload c·ªßa JWT c√≥ th·ªÉ b·ªã gi·∫£i m√£ d·ªÖ d√†ng. Tuy·ªát ƒë·ªëi kh√¥ng l∆∞u m·∫≠t kh·∫©u, s·ªë th·∫ª t√≠n d·ª•ng hay th√¥ng tin c√° nh√¢n nh·∫°y c·∫£m trong ƒë√≥.</p>
        </div>
        <div class="practice-card bg-white p-6 rounded-lg shadow-sm border-l-4 border-green-500">
          <h4 class="font-bold text-lg mb-2">Lu√¥n d√πng HTTPS</h4>
          <p class="text-gray-600">M·ªçi giao ti·∫øp ph·∫£i ƒë∆∞·ª£c m√£ h√≥a qua HTTPS ƒë·ªÉ ngƒÉn ch·∫∑n k·∫ª gian nghe l√©n v√† ƒë√°nh c·∫Øp token tr√™n ƒë∆∞·ªùng truy·ªÅn.</p>
        </div>
        <div class="practice-card bg-white p-6 rounded-lg shadow-sm border-l-4 border-green-500">
          <h4 class="font-bold text-lg mb-2">L∆∞u tr·ªØ Token an to√†n</h4>
          <p class="text-gray-600">·ªû ph√≠a client, ∆∞u ti√™n l∆∞u JWT trong cookie `HttpOnly` v√† `Secure` ƒë·ªÉ ch·ªëng l·∫°i c√°c cu·ªôc t·∫•n c√¥ng XSS.</p>
        </div>
        <div class="practice-card bg-white p-6 rounded-lg shadow-sm border-l-4 border-yellow-500">
          <h4 class="font-bold text-lg mb-2">C∆° ch·∫ø thu h·ªìi Token</h4>
          <p class="text-gray-600">X√¢y d·ª±ng m·ªôt danh s√°ch ƒëen (blacklist) c√°c token ƒë√£ b·ªã v√¥ hi·ªáu h√≥a (v√≠ d·ª• khi ng∆∞·ªùi d√πng ƒëƒÉng xu·∫•t) ƒë·ªÉ ngƒÉn ch·∫∑n vi·ªác t√°i s·ª≠ d·ª•ng.</p>
        </div>
      </div>
    </div>

    <div id="case-study" class="content-section">
      <h2 class="text-3xl font-bold mb-4 text-gray-800">T√¨nh Hu·ªëng Th·ª±c T·∫ø: H·ªá Th·ªëng ƒê·∫∑t M√≥n ƒÇn</h2>
      <p class="mb-6 text-lg text-gray-600">H√£y xem c√°ch JWT t·ªèa s√°ng trong m·ªôt h·ªá th·ªëng microservices ƒë·∫∑t m√≥n ƒÉn. S∆° ƒë·ªì n√†y minh h·ªça lu·ªìng x√°c th·ª±c t·ª´ client ƒë·∫øn c√°c d·ªãch v·ª• backend th√¥ng qua API Gateway. Nh·∫•p v√†o c√°c m≈©i t√™n ƒë·ªÉ xem JWT ƒë√≥ng vai tr√≤ g√¨ ·ªü m·ªói b∆∞·ªõc.</p>
      <div class="bg-white p-8 rounded-lg shadow-sm">
        <div class="relative">
          <div class="grid grid-cols-3 gap-8 items-center">
            <div class="text-center">
              <div class="p-4 bg-blue-100 border-2 border-blue-300 rounded-lg">
                <span class="text-4xl">üì±</span>
                <h4 class="font-bold mt-2">Client App</h4>
              </div>
            </div>
            <div class="text-center">
              <div class="p-4 bg-purple-100 border-2 border-purple-300 rounded-lg">
                <span class="text-4xl">üö™</span>
                <h4 class="font-bold mt-2">API Gateway</h4>
              </div>
            </div>
            <div class="space-y-4">
              <div class="p-3 bg-green-100 border-2 border-green-300 rounded-lg text-center">
                <span class="text-2xl">üë§</span>
                <h5 class="font-semibold">User Service</h5>
              </div>
              <div class="p-3 bg-orange-100 border-2 border-orange-300 rounded-lg text-center">
                <span class="text-2xl">üçî</span>
                <h5 class="font-semibold">Order Service</h5>
              </div>
            </div>
          </div>

          <!-- Arrows -->
          <div class="absolute top-1/2 left-0 w-full h-full">
            <div id="arrow-1" data-info="1. Client g·ª≠i y√™u c·∫ßu ƒëƒÉng nh·∫≠p ƒë·∫øn API Gateway." class="case-arrow absolute" style="top: 25%; left: 16%; transform: translateY(-50%);">
              <span class="text-3xl text-gray-500 cursor-pointer hover:text-blue-500">‚ü∂</span>
            </div>
            <div id="arrow-2" data-info="2. API Gateway chuy·ªÉn ti·∫øp y√™u c·∫ßu ƒë·∫øn User Service ƒë·ªÉ x√°c th·ª±c." class="case-arrow absolute" style="top: 10%; left: 49%; transform: translateY(-50%);">
              <span class="text-3xl text-gray-500 cursor-pointer hover:text-blue-500">‚ü∂</span>
            </div>
            <div id="arrow-3" data-info="3. User Service c·∫•p JWT v√† tr·∫£ v·ªÅ cho Client qua Gateway." class="case-arrow absolute" style="top: 25%; left: 49%; transform: translateY(-50%) rotate(180deg);">
              <span class="text-3xl text-gray-500 cursor-pointer hover:text-blue-500">‚ü∂</span>
            </div>
            <div id="arrow-4" data-info="4. Client g·ª≠i y√™u c·∫ßu t·∫°o ƒë∆°n h√†ng (k√®m JWT) ƒë·∫øn API Gateway." class="case-arrow absolute" style="top: 60%; left: 16%; transform: translateY(-50%);">
              <span class="text-3xl text-gray-500 cursor-pointer hover:text-blue-500">‚ü∂</span>
            </div>
            <div id="arrow-5" data-info="5. API Gateway x√°c th·ª±c JWT, sau ƒë√≥ chuy·ªÉn y√™u c·∫ßu ƒë·∫øn Order Service." class="case-arrow absolute" style="top: 75%; left: 49%; transform: translateY(-50%);">
              <span class="text-3xl text-gray-500 cursor-pointer hover:text-blue-500">‚ü∂</span>
            </div>
          </div>
        </div>
        <div id="case-study-info" class="mt-12 p-4 border rounded-lg bg-gray-50 text-center min-h-[60px]">
          <p class="text-lg text-gray-700">Nh·∫•p v√†o m·ªôt m≈©i t√™n ƒë·ªÉ xem chi ti·∫øt lu·ªìng.</p>
        </div>
      </div>
    </div>
  </main>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('.nav-link');
    const contentSections = document.querySelectorAll('.content-section');

    function navigateTo(hash) {
      navLinks.forEach(link => {
        if (link.getAttribute('href') === hash) {
          link.classList.add('active');
        } else {
          link.classList.remove('active');
        }
      });

      contentSections.forEach(section => {
        if ('#' + section.id === hash) {
          section.classList.add('active');
        } else {
          section.classList.remove('active');
        }
      });
    }

    navLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        navigateTo(targetId);
        window.location.hash = targetId;
      });
    });

    if (window.location.hash) {
      navigateTo(window.location.hash);
    } else {
      navigateTo('#overview');
    }

    // JWT Anatomy Section
    const jwtParts = document.querySelectorAll('.jwt-part');
    const explanationTitle = document.getElementById('explanation-title');
    const explanationContent = document.getElementById('explanation-content');
    const jwtExplanations = {
      header: {
        title: 'Header (Ti√™u ƒë·ªÅ)',
        content: `
                <p>Ph·∫ßn n√†y ch·ª©a th√¥ng tin v·ªÅ lo·∫°i token v√† thu·∫≠t to√°n m√£ h√≥a ƒë∆∞·ª£c s·ª≠ d·ª•ng.</p>
                <pre class="bg-gray-200 p-2 rounded mt-2 text-sm"><code>{\n  "alg": "HS256",\n  "typ": "JWT"\n}</code></pre>
                <ul class="list-disc list-inside mt-2">
                    <li><b>alg:</b> Thu·∫≠t to√°n k√Ω (v√≠ d·ª•: HS256 - HMAC using SHA-256).</li>
                    <li><b>typ:</b> Lo·∫°i token (lu√¥n l√† "JWT").</li>
                </ul>
            `
      },
      payload: {
        title: 'Payload (N·ªôi dung)',
        content: `
                <p>ƒê√¢y l√† n∆°i ch·ª©a c√°c "claims" - th√¥ng tin v·ªÅ ng∆∞·ªùi d√πng v√† c√°c d·ªØ li·ªáu kh√°c.</p>
                <pre class="bg-gray-200 p-2 rounded mt-2 text-sm"><code>{\n  "sub": "1234567890",\n  "name": "John Doe",\n  "iat": 1516239022,\n  "roles": ["ADMIN", "USER"]\n}</code></pre>
                <p class="mt-2">G·ª£i √Ω: "B·∫°n nghƒ© claims trong Payload c√≥ th·ªÉ ƒë∆∞·ª£c d√πng nh∆∞ th·∫ø n√†o trong h·ªá th·ªëng ƒë·∫∑t m√≥n ƒÉn?". V√≠ d·ª•, claim <b>roles</b> c√≥ th·ªÉ d√πng ƒë·ªÉ ph√¢n quy·ªÅn, ch·ªâ cho ph√©p ng∆∞·ªùi d√πng c√≥ vai tr√≤ "ADMIN" truy c·∫≠p c√°c API qu·∫£n tr·ªã.</p>
            `
      },
      signature: {
        title: 'Signature (Ch·ªØ k√Ω)',
        content: `
                <p>Ch·ªØ k√Ω ƒë∆∞·ª£c t·∫°o ra ƒë·ªÉ x√°c th·ª±c r·∫±ng token kh√¥ng b·ªã thay ƒë·ªïi. N√≥ ƒë∆∞·ª£c t√≠nh to√°n b·∫±ng c√°ch:</p>
                <pre class="bg-gray-200 p-2 rounded mt-2 text-sm"><code>HMACSHA256(\n  base64UrlEncode(header) + "." +\n  base64UrlEncode(payload),\n  your-256-bit-secret\n)</code></pre>
                <p class="mt-2">Ch·ªØ k√Ω n√†y ƒë·∫£m b·∫£o t√≠nh to√†n v·∫πn v√† x√°c th·ª±c c·ªßa token. N·∫øu ai ƒë√≥ c·ªë g·∫Øng thay ƒë·ªïi Header ho·∫∑c Payload, ch·ªØ k√Ω s·∫Ω kh√¥ng c√≤n h·ª£p l·ªá.</p>
            `
      }
    };

    jwtParts.forEach(part => {
      part.addEventListener('click', function() {
        const partName = this.dataset.part;
        const data = jwtExplanations[partName];
        explanationTitle.textContent = data.title;
        explanationContent.innerHTML = data.content;
      });
    });

    // Flow Section
    const flowSteps = document.querySelectorAll('.flow-step');
    const flowNextBtn = document.getElementById('flow-next-btn');
    const flowExplanationText = document.getElementById('flow-explanation-text');
    let currentStep = 0;
    const flowExplanations = [
      "1. Ng∆∞·ªùi d√πng cung c·∫•p th√¥ng tin ƒëƒÉng nh·∫≠p (username/password).",
      "2. Server x√°c th·ª±c th√¥ng tin. N·∫øu h·ª£p l·ªá, server t·∫°o m·ªôt JWT ch·ª©a th√¥ng tin ng∆∞·ªùi d√πng (claims) v√† k√Ω n√≥ b·∫±ng m·ªôt kh√≥a b√≠ m·∫≠t.",
      "3. Server tr·∫£ JWT v·ªÅ cho client. Client l∆∞u tr·ªØ token n√†y m·ªôt c√°ch an to√†n (v√≠ d·ª•: trong HttpOnly cookie).",
      "4. V·ªõi m·ªói y√™u c·∫ßu ƒë·∫øn c√°c API ƒë∆∞·ª£c b·∫£o v·ªá, client ƒë√≠nh k√®m JWT v√†o header Authorization (v√≠ d·ª•: Bearer <token>).",
      "5. Server nh·∫≠n y√™u c·∫ßu, tr√≠ch xu·∫•t token v√† x√°c minh ch·ªØ k√Ω. N√≥ c≈©ng ki·ªÉm tra c√°c claims nh∆∞ th·ªùi gian h·∫øt h·∫°n (`exp`).",
      "6. N·∫øu token h·ª£p l·ªá, server x·ª≠ l√Ω y√™u c·∫ßu v√† tr·∫£ v·ªÅ d·ªØ li·ªáu cho client. N·∫øu kh√¥ng, server tr·∫£ v·ªÅ l·ªói 401 Unauthorized."
    ];

    function updateFlow() {
      flowSteps.forEach((step, index) => {
        if (index === currentStep) {
          step.classList.add('active');
        } else {
          step.classList.remove('active');
        }
      });
      flowExplanationText.textContent = flowExplanations[currentStep];
      currentStep = (currentStep + 1) % flowSteps.length;
    }
    flowNextBtn.addEventListener('click', updateFlow);
    updateFlow();

    // Implementation Section
    const codeTabs = document.getElementById('code-tabs');
    const codeContent = document.getElementById('code-content');
    const codeSnippets = {
      pom: {
        title: 'Dependencies (pom.xml)',
        code: `
<dependencies>
    <!-- Spring Security -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-security</artifactId>
    </dependency>
    <!-- JWT Library: jjwt -->
    <dependency>
        <groupId>io.jsonwebtoken</groupId>
        <artifactId>jjwt-api</artifactId>
        <version>0.11.5</version>
    </dependency>
    <dependency>
        <groupId>io.jsonwebtoken</groupId>
        <artifactId>jjwt-impl</artifactId>
        <version>0.11.5</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>io.jsonwebtoken</groupId>
        <artifactId>jjwt-jackson</artifactId>
        <version>0.11.5</version>
        <scope>runtime</scope>
    </dependency>
</dependencies>
`
      },
      config: {
        title: 'C·∫•u h√¨nh Spring Security',
        code: `
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    // ... inject JwtAuthFilter, AuthenticationProvider ...

    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
            .csrf(csrf -> csrf.disable())
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/api/auth/**").permitAll()
                .anyRequest().authenticated()
            )
            .sessionManagement(session -> session
                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)
            )
            .authenticationProvider(authenticationProvider)
            .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);

        return http.build();
    }
}
`
      },
      service: {
        title: 'JwtService: T·∫°o v√† x√°c th·ª±c Token',
        code: `
@Service
public class JwtService {

    @Value("\${security.jwt.secret-key}")
    private String secretKey;

    public String generateToken(UserDetails userDetails) {
        return Jwts.builder()
                .setSubject(userDetails.getUsername())
                .setIssuedAt(new Date(System.currentTimeMillis()))
                .setExpiration(new Date(System.currentTimeMillis() + 1000 * 60 * 60)) // 1 hour
                .signWith(getSigningKey(), SignatureAlgorithm.HS256)
                .compact();
    }

    public boolean isTokenValid(String token, UserDetails userDetails) {
        final String username = extractUsername(token);
        return (username.equals(userDetails.getUsername())) && !isTokenExpired(token);
    }

    private Key getSigningKey() {
        byte[] keyBytes = Decoders.BASE64.decode(secretKey);
        return Keys.hmacShaKeyFor(keyBytes);
    }
    // ... other helper methods ...
}
`
      },
      filter: {
        title: 'JwtAuthFilter: Ch·∫∑n v√† x·ª≠ l√Ω y√™u c·∫ßu',
        code: `
@Component
public class JwtAuthFilter extends OncePerRequestFilter {
    // ... inject JwtService, UserDetailsService ...

    @Override
    protected void doFilterInternal(
            HttpServletRequest request,
            HttpServletResponse response,
            FilterChain filterChain) throws ServletException, IOException {

        final String authHeader = request.getHeader("Authorization");
        if (authHeader == null || !authHeader.startsWith("Bearer ")) {
            filterChain.doFilter(request, response);
            return;
        }

        final String jwt = authHeader.substring(7);
        final String username = jwtService.extractUsername(jwt);

        if (username != null && SecurityContextHolder.getContext().getAuthentication() == null) {
            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);
            if (jwtService.isTokenValid(jwt, userDetails)) {
                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(
                        userDetails, null, userDetails.getAuthorities());
                authToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));
                SecurityContextHolder.getContext().setAuthentication(authToken);
            }
        }
        filterChain.doFilter(request, response);
    }
}
`
      }
    };

    function renderCode(tabName) {
      const snippet = codeSnippets[tabName];
      codeContent.innerHTML = `
            <h4 class="text-xl font-semibold mb-4">${snippet.title}</h4>
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <pre><code>${snippet.code.trim().replace(/</g, "&lt;").replace(/>/g, "&gt;")}</code></pre>
            </div>
        `;
    }

    codeTabs.addEventListener('click', function(e) {
      if (e.target.tagName === 'BUTTON') {
        codeTabs.querySelector('.active').classList.remove('active');
        e.target.classList.add('active');
        renderCode(e.target.dataset.tab);
      }
    });

    renderCode('pom');

    // Case Study Section
    const arrows = document.querySelectorAll('.case-arrow');
    const caseStudyInfo = document.getElementById('case-study-info').querySelector('p');
    arrows.forEach(arrow => {
      arrow.addEventListener('click', function() {
        const info = this.dataset.info;
        caseStudyInfo.textContent = info;
      });
    });
  });

  function copyCode(button) {
    const pre = button.nextElementSibling;
    const code = pre.querySelector('code');
    const text = code.innerText;

    const textarea = document.createElement('textarea');
    textarea.value = text;
    document.body.appendChild(textarea);
    textarea.select();
    try {
      document.execCommand('copy');
      button.textContent = 'ƒê√£ ch√©p!';
      setTimeout(() => {
        button.textContent = 'Copy';
      }, 2000);
    } catch (err) {
      console.error('Failed to copy text: ', err);
      button.textContent = 'L·ªói';
    }
    document.body.removeChild(textarea);
  }
</script>

</body>
</html>
